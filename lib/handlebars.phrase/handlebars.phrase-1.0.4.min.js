!function(e){"object"==typeof exports?module.exports=e(require("lodash")):"function"==typeof define&&define.amd&&define(["lodash"],e)}(function(e){var n,r,t,a={},i={},l={},p="default",o=".",s=!1,d=function(){var d=function(){var s=Array.prototype.slice.call(arguments),d=!1;"get"===s[0]&&(d=!0,s.shift());var u=s[0],c={},f=s[s.length-1];try{c=e.extend({},f.hash.params||{},f.hash),delete f.hash.params}catch(g){console.log(g,f,arguments)}var h;if(h=3===s.length?s[1]:c.locale,h||d||(h=this.locale),h&&"default"!==h||(h=p),a[p]||(a[p]={},i[p]={},l[p]={}),a[h]||(a[h]={},i[h]={},l[h]={}),c._append&&(u+=o+c._append,c._appendix&&(u+=o+c._appendix)),c._prepend&&(u=c._prepend+o+u,c._prependix&&(u=c._prependix+o+u)),!a[h][u]){var v=r[h][u];void 0===v&&h!==p&&(r[h][u]=r[p][u],v=r[h][u]),void 0!==v&&(-1===v.indexOf("{{")&&-1===v.indexOf("((")?i[h][u]=v:l[h][u]=n.compile(v)),a[h][u]=!0}var x;if(i[h][u])x=i[h][u];else if(l[h][u]){c.locale=h;var m=e.extend({},this,c),_=l[h][u];x=_.call(this,m)}else d||c["_allow-empty"]||(x=u);return x&&c._debug&&(x='<phrase data-phrase-key="'+u+'">'+x+"</phrase>"),x&&t&&(x=t(x)),x?new n.SafeString(x):""},u={locale:function(e){return e&&(p=e),p},get:function(e,n,r,t){n||(n={}),r=r||this;var a=["get",e,{hash:n}];return t&&a.splice(2,0,t),d.apply(r,a)},getString:function(e,n,r,t){var a=u.get(e,n,r,t);return a?a.toString():void 0},setLanguages:function(e,n){n=n||{},a={},i={},l={},e&&(r=e),n.penddelimiter&&(o=n.penddelimiter),void 0!==n.localefallback&&(s=!!n.localefallback)},addLanguages:function(n){if(r=r||{},n)for(var t in n)a[t]={},i[t]={},l[t]={},r[t]=e.extend({},r[t],n[t])},setLanguage:function(e,n){r=r||{},a[e]={},i[e]={},l[e]={},r[e]=n},addLanguage:function(n,t){r=r||{},a[n]={},i[n]={},l[n]={},r[n]=e.extend({},r[n],t)},registerHelper:function(e){n=e,n.registerHelper("phrase",d);var r=n.parse;n.parse=function(e){return e=e.replace(/\(\(\(([^ ]+?)( .+?)*\)\)\)/g,function(e,n,r){return'{{{phrase "'+n+'"'+(r?r:"")+"}}}"}),e=e.replace(/\(\(([^ ]+?)( .+?)*\)\)/g,function(e,n,r){return'{{phrase "'+n+'"'+(r?r:"")+"}}"}),r(e)}},setFilter:function(e){t=e}};return u.registerHelpers=u.registerHelper,u}();return d});