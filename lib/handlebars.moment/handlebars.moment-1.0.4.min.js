!function(a){"object"==typeof exports?module.exports=a(require("lodash"),require("moment")):"function"==typeof define&&define.amd?define(["lodash","moment"],a):"undefined"!=typeof window&&null!=window&&window.moment&&(window.HandlebarsMoment=a)}(function(a,e){var t=function(t){var s={dates:"date",months:"month",years:"year",isoweekday:"isoWeekday",dayofyear:"dayOfYear",isoweek:"isoWeek",isoweeks:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear",zoneabbr:"zoneAbbr",zonename:"zoneName",tostring:"toString",string:"toString",str:"toString",valueof:"valueOf",value:"valueOf",val:"valueOf",fromnow:"fromNow",daysinmonth:"daysInMonth",todate:"toDate",toarray:"toArray",array:"toArray",tojson:"toJSON",json:"toJSON",toisostring:"toISOString",isostring:"toISOString"},o={L:"dddd",S:"ddd",XS:"dd"};t.registerHelper("moment",function(){function t(a,e){return"string"==typeof a&&a.match(/^\d+(\.\d+){0,1}$/)&&(a=+a),e&&"number"==typeof a&&(a=1e3*a),a}function r(a){var e=l[a];if(e){var t=l[a+"param"];void 0===t&&(t=l.amount);var s=e;if(t){var o=+e;s={},isNaN(o)?s[e]=+t:s[t]=o}g[a](s)}}var n=Array.prototype.slice.call(arguments),i=n.pop(),f=n.shift(),d=n.shift(),u=n.shift(),m=n.shift(),h=n.shift();i.hash&&i.hash.params&&(i.hash=a.extend({},i.hash.params,i.hash),delete i.hash.params);var l=i.hash;f||(f=l.date),f=t(f,l.unix);var p=t(l.max,l.unixmax),y=t(l.min,l.unixmin);d||(d=l.format||l.fn),s[d]&&(d=s[d]),"weekday"===d&&(l.type=l.type?l.type.toUpperCase():null,"NUMBER"!==l.type&&(d=o[l.type]?o[l.type]:o.L));var v="start",c=l.startOf||l.startof;c||(c=l.endOf||l.endof,c&&(v="end"));var g;if(e.isMoment(f))g=f.clone();else{var w=l.utc?e.utc:e;g=w(f,l.input)}l.lang&&g.lang(l.lang),p&&(g=e.max(e(p),g)),y&&(g=e.min(e(y),g)),c&&(g=g[v+"Of"](c)),void 0===l.nosuffix&&void 0!==l.suffix&&(l.nosuffix=!l.suffix),l.from&&(d="from",u=t(l.from,l.unixfrom)),"fromNow"===d&&void 0===u&&(u=l.nosuffix),"from"===d&&void 0===m&&(m=l.nosuffix),l.diff&&(d="diff",u=t(l.diff,l.unixdiff)),"diff"===d&&(void 0===m&&(m=l.unitdiff),void 0===h&&(h=l.nosuffix)),r("add"),r("subtract"),l.local?g.local():l.utc&&g.utc();var x=g[d]?g[d](u,m,h):g.format(d);return x});var r={asmilliseconds:"asMilliseconds",asseconds:"asSeconds",asminutes:"asMinutes",ashours:"asHours",asdays:"asDays",asweeks:"asWeeks",asmonths:"asMonths",asyears:"asYears"},n=["ms","s","m","h","d","w","M","y"],i={};for(var f in n)i[n[f]]=!0;t.registerHelper("duration",function(){function t(a){var e=u[a];if(e){isNaN(+e)||(e=+e);var t=u[a+"unit"];void 0===t&&(t=u[a+"param"]),m[a](e,t)}}var s=Array.prototype.slice.call(arguments),o=s.pop(),n=s.shift(),f=s.shift(),d=s.shift();o.hash&&o.hash.params&&(o.hash=a.extend({},o.hash.params,o.hash),delete o.hash.params);var u=o.hash;n||(n=u.duration),"string"==typeof n&&n.match(/^\d+$/)&&(n=+n);var m=e.duration(n,u.input);return t("add"),t("subtract"),f||(f=u.method),i[f]&&(d=f,f="get"),r[f]&&(f=r[f]),u.as?(f="as",d=u.as):u.get&&(f="get",d=u.get),m[f]||(f="humanize"),"humanize"===f&&void 0===d&&(d=u.suffix),m[f](d)})},s={registerHelpers:function(a){t(a)}};return s});